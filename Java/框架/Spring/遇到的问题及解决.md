[TOC]

## 1 方法内返回页面或JSON
```
@Controller
public class IndexController {
    @RequestMapping("/")
    public ModelAndView index(HttpServletRequest request){
    
        // 判定session是否存在
        if(null == request.getSession().getAttribute("user")){

            // session中不存在指定属性则添加
            request.getSession().setAttribute("user", "admin");
            request.getSession().setAttribute("url", request.getRequestURI());
            ModelAndView mav = new ModelAndView(new MappingJackson2JsonView());
            mav.addObject("第一次登陆");
            return mav;
        }

        // session中存在则返回页面
        ModelAndView mav = new ModelAndView("personList");
        return mav;
    }
}
```
返回页面的方式： 
`ModelAndView mav = new ModelAndView(“personList”);` 
返回JSON的方式： 
`ModelAndView mav = new ModelAndView(new MappingJackson2JsonView()); `
既返回页面也包含JSON的方式： 
```
ModelAndView mav = new ModelAndView(); 
mav.setViewName(“personList”); 
mav.addObject(“option”, “success”);
```